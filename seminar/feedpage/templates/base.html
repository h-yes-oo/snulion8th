<!-- feedpage/templates/base.html -->
{% load static %}
{% load socialaccount %}   <!--이 두 줄을 추가해주세요 !!!-->
{% providers_media_js %} 
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>snulion</title>
        <link rel="stylesheet" href="{% static 'feedpage/style.css' %}">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
        <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" 
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" 
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=8rszerlr23"></script>
        {% comment %} {% load sass_tags %} 
        <link href="{% sass_src 'feedpage/main.scss' %}" rel="stylesheet" type="text/css" /> {% endcomment %}
    </head>
    <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">Snulion Feed Page</span> 
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation. We hide it in small screens. -->
                <nav class="mdl-navigation mdl-layout--large-screen-only">         
                    {% if user.is_authenticated %}
                        {{ user.get_username }}님, 안녕하세요</br>
                        <a href="{% url 'profile_edit' user.id %}">
                            <button class="mdl-button mdl-js-button">정보수정</button></a> </br>  
                        <a href="#logoutModal" data-toggle="modal">                     
                            <button class="mdl-button mdl-js-button">로그아웃</button></a> </br>
                        {% comment %} 대학: {{ user.profile.college }} university</br>
                        전공: {{ user.profile.major }} </br> 
                        이메일: {{ user.profile.email }} </br>
                        생일: {{ user.profile.birthday }} </br> 
                        주소: {{ user.profile.address }} </br>
                        내가 좋아한 글 : {{ user.like_feeds.count }}개 {% endcomment %}
                        {% comment %} 
                            ?next={{request.path}}를 지우면, 만든 logout page로 redirect. 
                        {% endcomment %}
                    {% else %}
                        <a href="#signupModal" data-toggle="modal">
                            <button class="mdl-button mdl-js-button mdl-js-ripple-effect">회원가입</button></a>
                        <a href="#loginModal" data-toggle="modal">
                            <button class="mdl-button mdl-js-button mdl-js-ripple-effect">로그인</button></a>
                        {% comment %} <a href="{% provider_login_url 'google'%}">구글 로그인</a>  
                        <a href="{% provider_login_url 'naver'%}">네이버 로그인</a> {% endcomment %}
                        {% comment %} 
                            ?next={{request.path}}는 login 시의 접속 데이터를 기록해준다. 
                        {% endcomment %}
                    {% endif %}
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">FeedPage</span>
            <nav class="mdl-navigation">    
                <a class="mdl-navigation__link" href="/feeds/">메인 페이지</a>     <!-- href를 "/feeds/"로 바꾸고 Link 대신 메인페이지라고 표시해주세요 -->
                <a class="mdl-navigation__link" href="/feeds/map/">지도 보기</a>   <!-- href를 "/feeds/map/"로 바꾸고 Link 대신 메인페이지라고 표시해주세요 -->
            </nav>        
        </div>
        <main class="mdl-layout__content">
            <div class="page-content">
                {% block content %}
                {% endblock %}
            </div>
        </main> 
    </div>
    <!-- 
        하... 아래부분에서 
        base.html -> new/signup/login/logout -> views.py -> render 
        해당 template 으로 가는데, 이 template들중 feedpage/new.html이 base.html을 extends해서, 
        maximum recursion error에 빠지는 것이었다는 슬픈 이야기    -->
        {% include 'feedpage/new.html' %}
        {% include 'account/signup.html' %}
        {% include 'account/login.html' %}
        {% include 'account/logout.html' %} 
        <script src="{% static 'feedpage/modal.js' %}"></script>
        <script src="{% static 'feedpage/myjs.js' %}"></script>
    </body>
</html>