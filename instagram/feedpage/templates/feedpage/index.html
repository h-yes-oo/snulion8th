
<link href="https://fonts.googleapis.com/css?family=Nanum+Gothic&display=swap&subset=korean" rel="stylesheet">

{% load static %}
<!DOCTYPE html>
<html>
    <head> 
        <title>Liongram</title>
        <link rel="stylesheet"  href="{% static 'feedpage/style.css' %}" />
        <meta charset="utf-8">
    </head>

    <body>
        <div class = "header">
            <div class = "header_inner">
                <div class = "logo">
                    <a href = "https://www.instagram.com/">
                        <img class="logo_img" src="{% static 'feedpage/images/logo_img.png' %}">
                    </a>
                </div>
                <div class = "search">
                    <input class="search_box" type="text" placeholder="검색">
                </div>
                <div class = "button">
                    <div class = "icon">
                        <a href = "https://www.instagram.com/">
                            <img src="{% static 'feedpage/images/bell-regular.svg' %}"/>
                        </a>
                    </div>
                    <div class = "icon">
                        <a href = "https://www.instagram.com/">
                            <img src="{% static 'feedpage/images/heart-regular.svg' %}"/>
                        </a>
                    </div>
                    <div class = "icon">
                        <a href = "https://www.instagram.com/">
                            <img src="{% static 'feedpage/images/user-solid.svg' %}"/>
                        </a>
                    </div>
                    <div class = "signup">
                        {% if user.is_authenticated %}
                            {{ user.get_username }}님, 안녕하세요
                            <a href="{% url 'logout'%}?next={{request.path}}">로그아웃</a>
                        {% else %}
                            <a href="{% url 'signup' %}">회원가입</a>
                            <a href="{% url 'login'%}?next={{request.path}}">로그인</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class = "feed">
            {% if user.is_authenticated %}
                <a href="/feeds/new">new feed</a>
            {% endif %}
            {% comment %} 로그인한 상태에서 내가 작성한 피드말고 다른 유저들의 피드만 뜨게 하고싶다 {% endcomment %}
            {% for feed in feeds %}
                <div class = "article">
                    <div class = "article_header">
                        <div class = "username">{{ feed.author.get_username }}</div>
                        {% if request.user == feed.author %}
                            <a href="/feeds/{{ feed.id }}/delete" onclick="return confirm('진짜삭제?')">삭제</a> 
                        {% endif %}
                    </div>
                    <div class = "article_photo">
                        {% if  feed.photo %}
                            <img  src="{{ feed.photo.url }}"  alt="" class = "photo">
                        {% endif %}
                        {% comment %} <img class = "photo" src = "{% static 'feedpage/images/article_img.jpg' %}"> {% endcomment %}
                    </div>
                     <div class = "article_content">
                        <p>{{ feed.content }}</p>
                    </div>
                    <div class = "article_button">
                        <button class = "like">
                            <img src="{% static 'feedpage/images/heart-regular.svg' %}"/>
                        </button>
                    </div>
                    <div class = "article_comment">
                        {% for c in feed.feedcomment_set.all %}
                            <span>{{ c.content }}</span>
                            <span>{{ c.content.author.get_username }}</span>
                        {% endfor %}
                    </div>
                    <div class = "article_new_comment">
                        <form action="/feeds/{{ feed.id }}/comments/" method="POST">
                            {% csrf_token %}
                            <input  class="commentbox" type="text" name="게시"/>
                            <button class="submit" type="submit">댓글 달기</button>
                        </form>
                        {% comment %} <textarea class="commentbox" placeholder="댓글 달기..." style="height: 18px;"></textarea>
                        <input class="submit" type ="submit" value ="게시"> {% endcomment %}
                    </div>
                </div>
            {% endfor %}
        </div>

    </body>
</html>